!function(r){"use strict";function a(e,t,n){var i=this;this.element=e,this.config=t,this.effect=n,this.overlay=r("<div></div>",{class:i.config.overlayClass}),Object.defineProperty(this,"isShown",{get:function(){return i.effect.isShown()}}),Object.defineProperty(this,"sections",{get:function(){return i.element.find(i.config.sectionsContainerSelector)}}),this.element.append(this.overlay),this.effect.init(this.element,this.overlay,this.config.afterOpen,this.config.afterClose),this._bindEvents(),r.HSCore.components.HSScrollBar&&this.sections.length&&r.HSCore.components.HSScrollBar.init(this.sections)}function l(){this._isShown=!1}r.HSCore.components.HSHeaderFullscreen={_baseConfig:{afterOpen:function(){},afterClose:function(){},overlayClass:"u-fullscreen__overlay",sectionsContainerSelector:".u-fullscreen__content"},_pageCollection:r(),init:function(e,o){var s=this;return e&&(e=r(e)).length?(o=o&&r.isPlainObject(o)?o:{},this._bindGlobalEvents(),e.each(function(e,t){var n=r(this),i=r.extend(!0,{},s._baseConfig,o,n.data());n.data("HSHeaderFullscreen")||(n.data("HSHeaderFullscreen",new a(n,i,new l)),s._pageCollection=s._pageCollection.add(n))})):r()},_bindGlobalEvents:function(){var t=this;r(window).on("resize.HSHeaderFullscreen",function(){t.resizeTimeOutId&&clearTimeout(t.resizeTimeOutId),t.resizeTimeOutId=setTimeout(function(){t._pageCollection.each(function(e,t){t=r(t).data("HSHeaderFullscreen");t&&t.update()})},50)}),r(document).on("keyup.HSHeaderFullscreen",function(e){e.keyCode&&27==e.keyCode&&t._pageCollection.each(function(e,t){var n=r(t).data("HSHeaderFullscreen"),t=n.invoker;n&&(t.length&&t.find(".is-active").length&&t.find(".is-active").removeClass("is-active"),n.hide())})})}},a.prototype._bindEvents=function(){var t=this;return this.invoker=r('[data-target="#'+this.element.attr("id")+'"]'),this.invoker.length&&this.invoker.off("click.HSHeaderFullscreen").on("click.HSHeaderFullscreen",function(e){t[t.isShown?"hide":"show"](),e.preventDefault()}),this},a.prototype.update=function(){return!!this.effect&&(this.effect.update(),this)},a.prototype.show=function(){return!!this.effect&&(this.effect.show(),this)},a.prototype.hide=function(){return!!this.effect&&(this.effect.hide(),this)},l.prototype.init=function(e,t,n,i){var o=this;return this.element=e,this.overlay=t,this.afterOpen=n,this.afterClose=i,this.overlay.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(e){o.isShown()&&"transform"==e.originalEvent.propertyName?o.afterOpen.call(o.element,o.overlay):o.isShown()||"transform"!=e.originalEvent.propertyName||o.afterClose.call(o.element,o.overlay),e.stopPropagation(),e.preventDefault()}),this.update(),this.overlay.addClass(this.element.data("overlay-classes")),this},l.prototype.destroy=function(){return this.overlay.css({width:"auto",height:"auto"}),this.element.removeClass("u-fullscreen--showed"),this},l.prototype.update=function(){var e=r(window),t=e.width(),e=e.height();return this.overlay.css({width:e<t?1.5*t:1.5*e,height:e<t?1.5*t:1.5*e}),this},l.prototype.show=function(){return this.element.addClass("u-fullscreen--showed"),this._isShown=!0,this},l.prototype.hide=function(){return this.element.removeClass("u-fullscreen--showed"),this._isShown=!1,this},l.prototype.isShown=function(){return this._isShown}}(jQuery);