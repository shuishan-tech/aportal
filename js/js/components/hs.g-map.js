!function(D){"use strict";D.HSCore.components.HSGMap={_baseConfig:{zoom:14,scrollwheel:!1,infoWindowTemplate:function(e,t,o,a,l){return'<img class="rounded-circle" src="'+e+'" alt="'+t+'"><div class="p-2"><strong class="d-block mb-1">'+o+'</strong><p class="mb-1"><i class="fa fa-map-marker mr-2"></i>'+a+'</p><h2 class="h6 mb-0">'+l+"</h2></div>"}},pageCollection:D(),init:function(e,t){if(this.collection=e&&D(e).length?D(e):D(),D(e).length)return this.config=t&&D.isPlainObject(t)?D.extend({},this._baseConfig,t):this._baseConfig,this.config.itemSelector=e,this.initGMap(),this.pageCollection},initGMap:function(){var _=this.config,x=this.pageCollection;this.collection.each(function(e,t){var a,o,l,n=D(t),s=n.attr("id"),i=n.data("type"),r=n.data("lat"),c=n.data("lng"),d=n.data("zoom"),g=n.data("title"),p=JSON.parse(t.getAttribute("data-styles")),m=[],u=Boolean(n.data("polygon")),f=JSON.parse(t.getAttribute("data-polygon-cords")),h=JSON.parse(t.getAttribute("data-polygon-styles")),y=Boolean(n.data("polylines")),w=JSON.parse(t.getAttribute("data-polylines-cords")),k=JSON.parse(t.getAttribute("data-polylines-styles")),M=Boolean(n.data("routes")),C=JSON.parse(t.getAttribute("data-routes-cords")),v=JSON.parse(t.getAttribute("data-routes-styles")),b=Boolean(n.data("geolocation")),O=Boolean(n.data("geocoding")),z=n.data("cords-target"),S=Boolean(n.data("pin")),T=n.data("pin-icon"),I=Boolean(n.data("multiple-markers")),W=JSON.parse(t.getAttribute("data-markers-locations"));if("satellite"==i)(a=new google.maps.Map(document.getElementById(s),{zoom:d||_.zoom,scrollwheel:_.scrollwheel})).setCenter({lat:r,lng:c}),a.setMapTypeId(google.maps.MapTypeId.SATELLITE);else if("terrain"==i)(a=new google.maps.Map(document.getElementById(s),{zoom:d||_.zoom,scrollwheel:_.scrollwheel})).setCenter({lat:r,lng:c}),a.setMapTypeId(google.maps.MapTypeId.TERRAIN);else if("street-view"==i)(a=new google.maps.StreetViewPanorama(document.getElementById(s),{zoom:d||_.zoom,scrollwheel:_.scrollwheel})).setPosition({lat:r,lng:c});else if("static"==i)D(document).ready(function(){a=GMaps.staticMapURL({size:[2048,2048],lat:r,lng:c,zoom:d||_.zoom}),D("#"+s).css("background-image","url("+a+")")});else if("custom"==i){for(var A=p.length,e=0;e<A;e++){var B=p[e][0],G=p[e][1],N=p[e][2],J=D.extend({},m[e]);""!=B&&(J.featureType=B),""!=G&&(J.elementType=G),J.stylers=N,m.push(J)}if(a=new GMaps({div:"#"+s,lat:r,lng:c,zoom:d||_.zoom,scrollwheel:_.scrollwheel,styles:m}),S&&1!=I&&a.addMarker({lat:r,lng:c,title:g,icon:T}),S&&1==I)for(var L=0;L<W.length;L++)a.addMarker({title:W[L][1],lat:W[L][2],lng:W[L][3],icon:W[L][0],infoWindow:{content:_.infoWindowTemplate(W[L][4],W[L][5],W[L][6],W[L][7],W[L][8]),maxWidth:150}})}else a=new GMaps({div:"#"+s,lat:r,lng:c,zoom:d||_.zoom,scrollwheel:_.scrollwheel}),S&&a.addMarker({lat:r,lng:c,title:g,icon:T});if((S&&"satellite"==i||"terrain"==i||"street-view"==i)&&(o=new google.maps.Marker({position:{lat:r,lng:c},map:a}),T&&(l=new google.maps.MarkerImage(T),o.setIcon(l)),g&&o.setOptions({title:g})),1==I&&"terrain"==i)for(var E,P=new google.maps.InfoWindow,R=0;R<W.length;R++)E=new google.maps.Marker({position:new google.maps.LatLng(W[R][1],W[R][2]),map:a}),google.maps.event.addListener(E,"click",function(e,t){return function(){P.setContent(W[t][0]),P.open(a,e)}}(E,R));b||google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){a.setCenter({lat:r,lng:c})},100)}),u&&D(document).ready(function(){a.drawPolygon({paths:f,strokeColor:h.strokeColor,strokeOpacity:h.strokeOpacity,strokeWeight:h.strokeWeight,fillColor:h.fillColor,fillOpacity:h.fillOpacity})}),y&&D(document).ready(function(){a.drawPolyline({path:w,strokeColor:k.strokeColor,strokeOpacity:k.strokeOpacity,strokeWeight:k.strokeWeight})}),M&&D(document).ready(function(){a.drawRoute({origin:C[0],destination:C[1],travelMode:v.travelMode,strokeColor:v.strokeColor,strokeOpacity:v.strokeOpacity,strokeWeight:v.strokeWeight})}),b&&GMaps.geolocate({success:function(e){a.setCenter({lat:e.coords.latitude,lng:e.coords.longitude}),a.addMarker({lat:e.coords.latitude,lng:e.coords.longitude,title:g,icon:T}),google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){a.setCenter({lat:e.coords.latitude,lng:e.coords.longitude})},100)})},error:function(e){alert("Geolocation failed: "+e.message)},not_supported:function(){alert("Your browser does not support geolocation")}}),O&&D(document).ready(function(){var e=D(z).closest("form");D(e).submit(function(e){e.preventDefault(),GMaps.geocode({address:D(z).val().trim(),callback:function(e,t){var o;"OK"==t&&(o=e[0].geometry.location,a.setCenter(o.lat(),o.lng()),a.addMarker({lat:o.lat(),lng:o.lng()}),r=o.lat(),c=o.lng())}})})}),x=x.add(n)})}}}(jQuery);