!function(_){"use strict";_.HSCore.components.HSGMap={_baseConfig:{zoom:14,scrollwheel:!1,infoWindowTemplate:function(e,t,o,a,l){return'<img class="rounded-circle" src="'+e+'" alt="'+t+'"><div class="p-2"><strong class="d-block mb-1">'+o+'</strong><p class="mb-1"><i class="fa fa-map-marker mr-2"></i>'+a+'</p><h2 class="h6 mb-0">'+l+"</h2></div>"}},pageCollection:_(),init:function(e,t){if(this.collection=e&&_(e).length?_(e):_(),_(e).length)return this.config=t&&_.isPlainObject(t)?_.extend({},this._baseConfig,t):this._baseConfig,this.config.itemSelector=e,this.initGMap(),this.pageCollection},initGMap:function(){var P=this.config,R=this.pageCollection;this.collection.each(function(e,t){var o,a=_(t),l=a.attr("id"),n=a.data("type"),s=a.data("lat"),i=a.data("lng"),r=a.data("zoom"),c=a.data("title"),d=JSON.parse(t.getAttribute("data-styles")),g=[],p=Boolean(a.data("polygon")),m=JSON.parse(t.getAttribute("data-polygon-cords")),u=JSON.parse(t.getAttribute("data-polygon-styles")),f=Boolean(a.data("polylines")),h=JSON.parse(t.getAttribute("data-polylines-cords")),y=JSON.parse(t.getAttribute("data-polylines-styles")),w=Boolean(a.data("routes")),k=JSON.parse(t.getAttribute("data-routes-cords")),M=JSON.parse(t.getAttribute("data-routes-styles")),C=Boolean(a.data("geolocation")),b=Boolean(a.data("geocoding")),v=a.data("cords-target"),O=Boolean(a.data("pin")),z=a.data("pin-icon"),S=Boolean(a.data("multiple-markers")),T=JSON.parse(t.getAttribute("data-markers-locations"));if("satellite"==n)(o=new google.maps.Map(document.getElementById(l),{zoom:r||P.zoom,scrollwheel:P.scrollwheel})).setCenter({lat:s,lng:i}),o.setMapTypeId(google.maps.MapTypeId.SATELLITE);else if("terrain"==n)(o=new google.maps.Map(document.getElementById(l),{zoom:r||P.zoom,scrollwheel:P.scrollwheel})).setCenter({lat:s,lng:i}),o.setMapTypeId(google.maps.MapTypeId.TERRAIN);else if("street-view"==n)(o=new google.maps.StreetViewPanorama(document.getElementById(l),{zoom:r||P.zoom,scrollwheel:P.scrollwheel})).setPosition({lat:s,lng:i});else if("static"==n)_(document).ready(function(){o=GMaps.staticMapURL({size:[2048,2048],lat:s,lng:i,zoom:r||P.zoom}),_("#"+l).css("background-image","url("+o+")")});else if("custom"==n){for(var I=d.length,e=0;e<I;e++){var W=d[e][0],A=d[e][1],B=d[e][2],G=_.extend({},g[e]);""!=W&&(G.featureType=W),""!=A&&(G.elementType=A),G.stylers=B,g.push(G)}if(o=new GMaps({div:"#"+l,lat:s,lng:i,zoom:r||P.zoom,scrollwheel:P.scrollwheel,styles:g}),O&&1!=S&&o.addMarker({lat:s,lng:i,title:c,icon:z}),O&&1==S)for(var N=0;N<T.length;N++)o.addMarker({title:T[N][1],lat:T[N][2],lng:T[N][3],icon:T[N][0],infoWindow:{content:P.infoWindowTemplate(T[N][4],T[N][5],T[N][6],T[N][7],T[N][8]),maxWidth:150}})}else o=new GMaps({div:"#"+l,lat:s,lng:i,zoom:r||P.zoom,scrollwheel:P.scrollwheel}),O&&o.addMarker({lat:s,lng:i,title:c,icon:z});if((O&&"satellite"==n||"terrain"==n||"street-view"==n)&&(t=new google.maps.Marker({position:{lat:s,lng:i},map:o}),z&&(O=new google.maps.MarkerImage(z),t.setIcon(O)),c&&t.setOptions({title:c})),1==S&&"terrain"==n)for(var J,L=new google.maps.InfoWindow,E=0;E<T.length;E++)J=new google.maps.Marker({position:new google.maps.LatLng(T[E][1],T[E][2]),map:o}),google.maps.event.addListener(J,"click",function(e,t){return function(){L.setContent(T[t][0]),L.open(o,e)}}(J,E));C||google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){o.setCenter({lat:s,lng:i})},100)}),p&&_(document).ready(function(){o.drawPolygon({paths:m,strokeColor:u.strokeColor,strokeOpacity:u.strokeOpacity,strokeWeight:u.strokeWeight,fillColor:u.fillColor,fillOpacity:u.fillOpacity})}),f&&_(document).ready(function(){o.drawPolyline({path:h,strokeColor:y.strokeColor,strokeOpacity:y.strokeOpacity,strokeWeight:y.strokeWeight})}),w&&_(document).ready(function(){o.drawRoute({origin:k[0],destination:k[1],travelMode:M.travelMode,strokeColor:M.strokeColor,strokeOpacity:M.strokeOpacity,strokeWeight:M.strokeWeight})}),C&&GMaps.geolocate({success:function(e){o.setCenter({lat:e.coords.latitude,lng:e.coords.longitude}),o.addMarker({lat:e.coords.latitude,lng:e.coords.longitude,title:c,icon:z}),google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){o.setCenter({lat:e.coords.latitude,lng:e.coords.longitude})},100)})},error:function(e){alert("Geolocation failed: "+e.message)},not_supported:function(){alert("Your browser does not support geolocation")}}),b&&_(document).ready(function(){var e=_(v).closest("form");_(e).submit(function(e){e.preventDefault(),GMaps.geocode({address:_(v).val().trim(),callback:function(e,t){"OK"==t&&(e=e[0].geometry.location,o.setCenter(e.lat(),e.lng()),o.addMarker({lat:e.lat(),lng:e.lng()}),s=e.lat(),i=e.lng())}})})}),R=R.add(a)})}}}(jQuery);