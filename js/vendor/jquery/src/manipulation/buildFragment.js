define(["../core","../core/toType","./var/rtagName","./var/rscriptType","./wrapMap","./getAll","./setGlobalEval"],function(h,m,C,g,v,y,T){"use strict";var w=/<|&#?\w+;/;return function(e,t,r,n,i){for(var o,a,l,s,c,f=t.createDocumentFragment(),p=[],d=0,u=e.length;d<u;d++)if((o=e[d])||0===o)if("object"===m(o))h.merge(p,o.nodeType?[o]:o);else if(w.test(o)){for(a=a||f.appendChild(t.createElement("div")),l=(C.exec(o)||["",""])[1].toLowerCase(),l=v[l]||v._default,a.innerHTML=l[1]+h.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;h.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",d=0;o=p[d++];)if(n&&-1<h.inArray(o,n))i&&i.push(o);else if(s=h.contains(o.ownerDocument,o),a=y(f.appendChild(o),"script"),s&&T(a),r)for(c=0;o=a[c++];)g.test(o.type||"")&&r.push(o);return f}});