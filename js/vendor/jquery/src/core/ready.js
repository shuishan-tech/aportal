define(["../core","../var/document","../core/readyException","../deferred"],function(t,n){"use strict";var d=t.Deferred();function e(){n.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t.ready()}t.fn.ready=function(e){return d.then(e).catch(function(e){t.readyException(e)}),this},t.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--t.readyWait:t.isReady)||(t.isReady=!0)!==e&&0<--t.readyWait||d.resolveWith(n,[t])}}),t.ready.then=d.then,"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?window.setTimeout(t.ready):(n.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e))});