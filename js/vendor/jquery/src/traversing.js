define(["./core","./var/indexOf","./traversing/var/dir","./traversing/var/siblings","./traversing/var/rneedsContext","./core/nodeName","./core/init","./traversing/findFilter","./selector"],function(s,t,r,e,c,i){"use strict";var u=/^(?:parents|prev(?:Until|All))/,o={children:!0,contents:!0,next:!0,prev:!0};function l(n,t){for(;(n=n[t])&&1!==n.nodeType;);return n}return s.fn.extend({has:function(n){var t=s(n,this),e=t.length;return this.filter(function(){for(var n=0;n<e;n++)if(s.contains(this,t[n]))return!0})},closest:function(n,t){var e,r=0,i=this.length,u=[],o="string"!=typeof n&&s(n);if(!c.test(n))for(;r<i;r++)for(e=this[r];e&&e!==t;e=e.parentNode)if(e.nodeType<11&&(o?-1<o.index(e):1===e.nodeType&&s.find.matchesSelector(e,n))){u.push(e);break}return this.pushStack(1<u.length?s.uniqueSort(u):u)},index:function(n){return n?"string"==typeof n?t.call(s(n),this[0]):t.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(s.uniqueSort(s.merge(this.get(),s(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}}),s.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return r(n,"parentNode")},parentsUntil:function(n,t,e){return r(n,"parentNode",e)},next:function(n){return l(n,"nextSibling")},prev:function(n){return l(n,"previousSibling")},nextAll:function(n){return r(n,"nextSibling")},prevAll:function(n){return r(n,"previousSibling")},nextUntil:function(n,t,e){return r(n,"nextSibling",e)},prevUntil:function(n,t,e){return r(n,"previousSibling",e)},siblings:function(n){return e((n.parentNode||{}).firstChild,n)},children:function(n){return e(n.firstChild)},contents:function(n){return i(n,"iframe")?n.contentDocument:(i(n,"template")&&(n=n.content||n),s.merge([],n.childNodes))}},function(r,i){s.fn[r]=function(n,t){var e=s.map(this,i,n);return"Until"!==r.slice(-5)&&(t=n),t&&"string"==typeof t&&(e=s.filter(t,e)),1<this.length&&(o[r]||s.uniqueSort(e),u.test(r)&&e.reverse()),this.pushStack(e)}}),s});