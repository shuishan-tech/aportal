!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(D){D.extend(D.summernote.plugins,{specialchars:function(o){var p=this,m=D.summernote.ui,t=o.layoutInfo.editor,n=o.options,i=n.langInfo,h=38,g=40,v=37,b=39,y=13,q=15,k=0,w=0,C=0,x=0,e=["&quot;","&amp;","&lt;","&gt;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&times;","&divide;","&fnof;","&circ;","&tilde;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&Dagger;","&bull;","&hellip;","&permil;","&prime;","&Prime;","&lsaquo;","&rsaquo;","&oline;","&frasl;","&euro;","&image;","&weierp;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&lArr;","&uArr;","&rArr;","&dArr;","&hArr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&loz;","&spades;","&clubs;","&hearts;","&diams;"];o.memo("button.specialchars",function(){return m.button({contents:'<i class="fa fa-font fa-flip-vertical">',tooltip:i.specialChar.specialChar,click:function(){p.show()}}).render()}),this.makeSpecialCharSetTable=function(){var r=D("<table/>");return D.each(e,function(e,o){var t=D("<td/>").addClass("note-specialchar-node"),n=e%q==0?D("<tr/>"):r.find("tr").last(),i=m.button({callback:function(e){e.html(o),e.attr("title",o),e.attr("data-value",encodeURIComponent(o)),e.css({width:35,"margin-right":"2px","margin-bottom":"2px"})}}).render();t.append(i),n.append(t),e%q==0&&r.append(n)}),x=r.find("tr").length,C=q,r},this.initialize=function(){var e=n.dialogsInBody?D(document.body):t,o='<div class="form-group row-fluid">'+this.makeSpecialCharSetTable()[0].outerHTML+"</div>";this.$dialog=m.dialog({title:i.specialChar.select,body:o}).render().appendTo(e)},this.show=function(){var e=o.invoke("editor.getSelectedText");o.invoke("editor.saveRange"),this.showSpecialCharDialog(e).then(function(e){o.invoke("editor.restoreRange");e=D("<span></span>").html(e)[0];e&&o.invoke("editor.insertNode",e)}).fail(function(){o.invoke("editor.restoreRange")})},this.showSpecialCharDialog=function(f){return D.Deferred(function(o){var t=p.$dialog,r=t.find(".note-specialchar-node"),a=null,n=[h,g,v,b],i=y;function l(e){e&&(e.find("button").addClass("active"),a=e)}function d(e){e.find("button").removeClass("active"),a=null}function u(e){var t,n,i,o=r.length%C;v===e?1<k?--k:1===w&&1===k?(k=o,w=x):(k=C,--w):b===e?w===x&&o===k?w=k=1:k<C?k+=1:w+=k=1:h===e?1===w&&o<k?w=x-1:--w:g===e&&(w+=1),w===x&&o<k||x<w?w=1:w<1&&(w=x),t=w,n=k,i=null,D.each(r,function(e,o){if(Math.ceil((e+1)/q)===t&&((e+1)%q==0?q:(e+1)%q)===n)return i=o,!1}),(o=D(i))&&(d(a),l(o))}function e(e){e.preventDefault();e=e.keyCode;if(null!=e){if(-1<n.indexOf(e)){if(null===a)return l(r.eq(0)),void(w=k=1);u(e)}else e===i&&a&&(o.resolve(decodeURIComponent(a.find("button").attr("data-value"))),t.modal("hide"));return!1}}if(d(r),f)for(var s=0;s<r.length;s++){var c=D(r[s]);c.text()===f&&(l(c),w=Math.ceil((s+1)/q),k=(s+1)%q)}m.onDialogShown(p.$dialog,function(){D(document).on("keydown",e),p.$dialog.find("button").tooltip(),r.on("click",function(e){e.preventDefault(),o.resolve(decodeURIComponent(D(e.currentTarget).find("button").attr("data-value"))),m.hideDialog(p.$dialog)})}),m.onDialogHidden(p.$dialog,function(){r.off("click"),p.$dialog.find("button").tooltip("destroy"),D(document).off("keydown",e),"pending"===o.state()&&o.reject()}),m.showDialog(p.$dialog)})}}})});