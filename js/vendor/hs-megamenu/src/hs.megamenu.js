!function(o){"use strict";var a=window.MegaMenu||{};function s(e,t,n,i){var s=this;this.$element=e,this.menu=t,this.options=n,this.$container=i,Object.defineProperties(this,{itemClass:{get:function(){return"mega-menu"===s.options.type?s.options.classMap.hasMegaMenu:s.options.classMap.hasSubMenu}},activeItemClass:{get:function(){return"mega-menu"===s.options.type?s.options.classMap.hasMegaMenuActive:s.options.classMap.hasSubMenuActive}},menuClass:{get:function(){return"mega-menu"===s.options.type?s.options.classMap.megaMenu:s.options.classMap.subMenu}},isOpened:{get:function(){return this.$element.hasClass(this.activeItemClass.slice(1))}}}),this.menu.addClass("animated").on("click.HSMegaMenu",function(e){s._updateMenuBounds()}),this.$element.data("max-width")&&this.menu.css("max-width",this.$element.data("max-width")),this.$element.data("position")&&this.menu.addClass("hs-position-"+this.$element.data("position")),this.options.animationOut&&this.menu.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(e){s.menu.hasClass(s.options.animationOut)&&(s.$element.removeClass(s.activeItemClass.slice(1)),s.options.afterClose.call(s,s.$element,s.menu)),s.menu.hasClass(s.options.animationIn)&&s.options.afterOpen.call(s,s.$element,s.menu),e.stopPropagation(),e.preventDefault()})}function e(){return"ontouchstart"in window}(a=function e(t,n){var i=this;this.$element=o(t),this.options=o.extend(!0,{},e.defaults,n),this._items=o(),Object.defineProperties(this,{itemsSelector:{get:function(){return i.options.classMap.hasSubMenu+","+i.options.classMap.hasMegaMenu}},_tempChain:{value:null,writable:!0},state:{value:null,writable:!0}}),this.initialize()}).defaults={event:"hover",direction:"horizontal",breakpoint:991,animationIn:!1,animationOut:!1,rtl:!1,hideTimeOut:300,sideBarRatio:.25,pageContainer:o("body"),classMap:{initialized:".hs-menu-initialized",mobileState:".hs-mobile-state",subMenu:".hs-sub-menu",hasSubMenu:".hs-has-sub-menu",hasSubMenuActive:".hs-sub-menu-opened",megaMenu:".hs-mega-menu",hasMegaMenu:".hs-has-mega-menu",hasMegaMenuActive:".hs-mega-menu-opened"},mobileSpeed:400,mobileEasing:"linear",isMenuOpened:!1,beforeOpen:function(){},beforeClose:function(){},afterOpen:function(){},afterClose:function(){}},a.prototype.initialize=function(){var n=this,e=o(window);return this.options.rtl&&this.$element.addClass("hs-rtl"),this.$element.addClass(this.options.classMap.initialized.slice(1)).addClass("hs-menu-"+this.options.direction),e.on("resize.HSMegaMenu",function(e){n.resizeTimeOutId&&clearTimeout(n.resizeTimeOutId),n.resizeTimeOutId=setTimeout(function(){window.innerWidth<=n.options.breakpoint&&"desktop"===n.state?n.initMobileBehavior():window.innerWidth>n.options.breakpoint&&"mobile"===n.state&&n.initDesktopBehavior(),n.refresh()},50)}),768<=window.innerWidth&&o(document).on("click.HSMegaMenu touchstart.HSMegaMenu","body",function(e){var t=o(e.target).parents(n.itemsSelector);n.closeAll(t.add(o(e.target)))}),e.on("keyup.HSMegaMenu",function(e){e.keyCode&&27===e.keyCode&&(n.closeAll(),n.options.isMenuOpened=!1)}),window.innerWidth<=this.options.breakpoint?this.initMobileBehavior():window.innerWidth>this.options.breakpoint&&this.initDesktopBehavior(),this.smartPositions(),this},a.prototype.smartPositions=function(){var n=this;this.$element.find(this.options.classMap.subMenu).each(function(e,t){s.smartPosition(o(t),n.options)})},a.prototype.bindEvents=function(){var s=this;"hover"!==this.options.event||e()?(this.$element.on("click.HSMegaMenu",e()?this.options.classMap.hasMegaMenu+" > a, "+this.options.classMap.hasSubMenu+" > a":this.options.classMap.hasMegaMenu+':not([data-event="hover"]) > a,'+this.options.classMap.hasSubMenu+':not([data-event="hover"]) > a',function(e){var t,n=o(this).parent();n.parents(s.itemsSelector);n.data("HSMenuItem")||s.initMenuItem(n,s.getType(n)),s.closeAll(n.add(n.parents(s.itemsSelector))),(t=n.addClass("hs-event-prevented").data("HSMenuItem")).isOpened?t.desktopHide():t.desktopShow(),e.preventDefault(),e.stopPropagation()}),e()||this.$element.on("mouseenter.HSMegaMenu",this.options.classMap.hasMegaMenu+'[data-event="hover"],'+this.options.classMap.hasSubMenu+'[data-event="hover"]',function(e){var t=o(this),n=t.parents(s.itemsSelector);t.data("HSMenuItem")||s.initMenuItem(t,s.getType(t)),s.closeAll(t.add(n)),n.add(t).each(function(e,t){var n=o(t).data("HSMenuItem");n.hideTimeOutId&&clearTimeout(n.hideTimeOutId),n.desktopShow()}),e.preventDefault(),e.stopPropagation()}).on("mouseleave.HSMegaMenu",this.options.classMap.hasMegaMenu+'[data-event="hover"],'+this.options.classMap.hasSubMenu+'[data-event="hover"]',function(e){o(this).data("HSMenuItem").hideTimeOutId=setTimeout(function(){s.closeAll(o(e.relatedTarget).parents(s.itemsSelector))},s.options.hideTimeOut),e.preventDefault(),e.stopPropagation()})):this.$element.on("mouseenter.HSMegaMenu",this.options.classMap.hasMegaMenu+':not([data-event="click"]),'+this.options.classMap.hasSubMenu+':not([data-event="click"])',function(e){var t=o(this),n=t.parents(s.itemsSelector);t.data("HSMenuItem")||s.initMenuItem(t,s.getType(t)),n=n.add(t),s.closeAll(n),n.each(function(e,t){var n=o(t).data("HSMenuItem");n.hideTimeOutId&&clearTimeout(n.hideTimeOutId),n.desktopShow()}),s._items=s._items.not(n),s._tempChain=n,e.preventDefault(),e.stopPropagation()}).on("mouseleave.HSMegaMenu",this.options.classMap.hasMegaMenu+':not([data-event="click"]),'+this.options.classMap.hasSubMenu+':not([data-event="click"])',function(e){var t,n;o(this).data("HSMenuItem")&&(t=o(this).data("HSMenuItem"),n=o(e.relatedTarget).parents(s.itemsSelector),t.hideTimeOutId=setTimeout(function(){s.closeAll(n)},s.options.hideTimeOut),s._items=s._items.add(s._tempChain),s._tempChain=null,e.preventDefault(),e.stopPropagation())}).on("click.HSMegaMenu touchstart.HSMegaMenu",this.options.classMap.hasMegaMenu+'[data-event="click"] > a, '+this.options.classMap.hasSubMenu+'[data-event="click"] > a',function(e){var t,n=o(this).parent('[data-event="click"]');n.data("HSMenuItem")||s.initMenuItem(n,s.getType(n)),s.closeAll(n.add(n.parents(s.itemsSelector))),(t=n.data("HSMenuItem")).isOpened?t.desktopHide():t.desktopShow(),e.preventDefault(),e.stopPropagation()}),this.$element.on("keydown.HSMegaMenu",this.options.classMap.hasMegaMenu+" > a,"+this.options.classMap.hasSubMenu+" > a",function(e){var t,n=o(this),i=n.parent();i.data("HSMenuItem")||s.initMenuItem(i,s.getType(i)),t=i.data("HSMenuItem"),n.is(":focus")&&(e.keyCode&&40===e.keyCode&&(e.preventDefault(),t.desktopShow(),s.options.isMenuOpened=!0),e.keyCode&&13===e.keyCode&&(!0===s.options.isMenuOpened?(t.desktopHide(),s.options.isMenuOpened=!1):(t.desktopShow(),s.options.isMenuOpened=!0))),n.on("focusout",function(){s.options.isMenuOpened=!1}),t.menu.find("a").on("focusout",function(){setTimeout(function(){t.menu.find("a").is(":focus")||(t.desktopHide(),s.options.isMenuOpened=!1)})})})},a.prototype.initMenuItem=function(e,t){var n=this,i=new s(e,e.children(n.options.classMap["mega-menu"===t?"megaMenu":"subMenu"]),o.extend(!0,{type:t},n.options,e.data()),n.$element);e.data("HSMenuItem",i),this._items=this._items.add(e)},a.prototype.initMobileBehavior=function(){var i=this;this.state="mobile",this.$element.off(".HSMegaMenu").addClass(this.options.classMap.mobileState.slice(1)).on("click.HSMegaMenu",i.options.classMap.hasSubMenu+" > a, "+i.options.classMap.hasMegaMenu+" > a",function(e){var t,n=o(this).parent();n.data("HSMenuItem")||i.initMenuItem(n,i.getType(n)),i.closeAll(n.parents(i.itemsSelector).add(n)),(t=n.data("HSMenuItem")).isOpened?t.mobileHide():t.mobileShow(),e.preventDefault(),e.stopPropagation()}).find(this.itemsSelector).not(this.options.classMap.hasSubMenuActive+","+this.options.classMap.hasMegaMenuActive).children(this.options.classMap.subMenu+","+this.options.classMap.megaMenu).hide()},a.prototype.initDesktopBehavior=function(){this.state="desktop",this.$element.removeClass(this.options.classMap.mobileState.slice(1)).off(".HSMegaMenu").find(this.itemsSelector).not(this.options.classMap.hasSubMenuActive+","+this.options.classMap.hasMegaMenuActive).children(this.options.classMap.subMenu+","+this.options.classMap.megaMenu).hide(),this.bindEvents()},a.prototype.closeAll=function(e){var n=this;return this._items.not(e&&e.length?e:o()).each(function(e,t){o(t).removeClass("hs-event-prevented").data("HSMenuItem")["mobile"===n.state?"mobileHide":"desktopHide"]()})},a.prototype.getType=function(e){return e&&e.length?e.hasClass(this.options.classMap.hasSubMenu.slice(1))?"sub-menu":e.hasClass(this.options.classMap.hasMegaMenu.slice(1))?"mega-menu":null:null},a.prototype.getState=function(){return this.state},a.prototype.refresh=function(){return this._items.add(this._tempChain).each(function(e,t){o(t).data("HSMenuItem")._updateMenuBounds()})},s.prototype.desktopShow=function(){return this.menu.length&&(this.$element.addClass(this.activeItemClass.slice(1)),this._updateMenuBounds(),this.menu.show(),"horizontal"===this.options.direction&&this.smartPosition(this.menu,this.options),this.options.animationOut?this.menu.removeClass(this.options.animationOut):this.options.afterOpen.call(this,this.$element,this.menu),this.options.animationIn&&this.menu.addClass(this.options.animationIn)),this},s.prototype.desktopHide=function(){return this.menu.length&&(this.$element.removeClass(this.activeItemClass.slice(1)),this.menu.hide(),this.options.animationIn&&this.menu.removeClass(this.options.animationIn),this.options.animationOut?this.menu.addClass(this.options.animationOut):this.options.afterClose.call(this,this.$element,this.menu)),this},s.prototype.mobileShow=function(){var e=this;return this.menu.length&&(this.menu.removeClass(this.options.animationIn).removeClass(this.options.animationOut).stop().slideDown({duration:e.options.mobileSpeed,easing:e.options.mobileEasing,complete:function(){e.options.afterOpen.call(e,e.$element,e.menu)}}),this.$element.addClass(this.activeItemClass.slice(1))),this},s.prototype.mobileHide=function(){var e=this;return this.menu.length&&(this.menu.stop().slideUp({duration:e.options.mobileSpeed,easing:e.options.mobileEasing,complete:function(){e.options.afterClose.call(e,e.$element,e.menu)}}),this.$element.removeClass(this.activeItemClass.slice(1))),this},s.prototype.smartPosition=function(e,t){s.smartPosition(e,t)},s.smartPosition=function(e,t){(e||e.length)&&(o(window),e.removeClass("hs-reversed"),t.rtl?e.offset().left<0&&e.addClass("hs-reversed"):e.offset().left+e.outerWidth()>window.innerWidth&&e.addClass("hs-reversed"))},s.prototype._updateMenuBounds=function(){var e="auto";if("vertical"===this.options.direction&&"mega-menu"===this.options.type){if(e=this.$container&&"desktop"===this.$container.data("HSMegaMenu").getState()?(this.options.pageContainer.length||(this.options.pageContainer=o("body")),this.options.pageContainer.outerWidth()*(1-this.options.sideBarRatio)):"auto",this.menu.css({width:e,height:"auto"}),this.menu.outerHeight()>this.$container.outerHeight())return;this.menu.css("height","100%")}},o.fn.HSMegaMenu=function(){for(var e,t=this,n=arguments[0],i=Array.prototype.slice.call(arguments,1),s=t.length,o=0;o<s;o++)if("object"==typeof n||void 0===n?t[o].MegaMenu=new a(t[o],n):e=t[o].MegaMenu[n].apply(t[o].MegaMenu,i),void 0!==e)return e;return t}}(jQuery);