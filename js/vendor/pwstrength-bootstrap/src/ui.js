var ui={};!function(a,u){"use strict";var t=["error","warning","success"],i=["veryWeak","weak","normal","medium","strong","veryStrong"];u.getContainer=function(r,s){var e=a(r.ui.container);return e&&1===e.length||(e=s.parent()),e},u.findElement=function(r,s,e){return s?r.find(s).find(e):r.find(e)},u.getUIElements=function(r,s){var e,o;return r.instances.viewports?r.instances.viewports:(e=u.getContainer(r,s),(o={}).$progressbar=u.findElement(e,r.ui.viewports.progress,"div.progress"),r.ui.showVerdictsInsideProgressBar&&(o.$verdict=o.$progressbar.find("span.password-verdict")),r.ui.showPopover||(r.ui.showVerdictsInsideProgressBar||(o.$verdict=u.findElement(e,r.ui.viewports.verdict,"span.password-verdict")),o.$errors=u.findElement(e,r.ui.viewports.errors,"ul.error-list")),o.$score=u.findElement(e,r.ui.viewports.score,"span.password-score"),r.instances.viewports=o)},u.initProgressBar=function(r,s){var e=u.getContainer(r,s),o="<div class='progress ";r.ui.bootstrap2?o+=r.ui.progressBarExtraCssClasses+"'><div class='":o+=r.ui.progressExtraCssClasses+"'><div class='"+r.ui.progressBarExtraCssClasses+" progress-",o+="bar'>",r.ui.showVerdictsInsideProgressBar&&(o+="<span class='password-verdict'></span>"),o+="</div></div>",r.ui.viewports.progress?e.find(r.ui.viewports.progress).append(o):a(o).insertAfter(s)},u.initHelper=function(r,s,e,o){var i=u.getContainer(r,s);o?i.find(o).append(e):a(e).insertAfter(s)},u.initVerdict=function(r,s){u.initHelper(r,s,"<span class='password-verdict'></span>",r.ui.viewports.verdict)},u.initErrorList=function(r,s){u.initHelper(r,s,"<ul class='error-list'></ul>",r.ui.viewports.errors)},u.initScore=function(r,s){u.initHelper(r,s,"<span class='password-score'></span>",r.ui.viewports.score)},u.initPopover=function(r,s){s.popover("destroy"),s.popover({html:!0,placement:r.ui.popoverPlacement,trigger:"manual",content:" "})},u.initUI=function(r,s){r.ui.showPopover?u.initPopover(r,s):(r.ui.showErrors&&u.initErrorList(r,s),r.ui.showVerdicts&&!r.ui.showVerdictsInsideProgressBar&&u.initVerdict(r,s)),r.ui.showProgressBar&&u.initProgressBar(r,s),r.ui.showScore&&u.initScore(r,s)},u.updateProgressBar=function(e,r,s,o){var i=u.getUIElements(e,r).$progressbar,t=i.find(".progress-bar"),n="progress-";e.ui.bootstrap2&&(t=i.find(".bar"),n=""),a.each(e.ui.colorClasses,function(r,s){e.ui.bootstrap2||e.ui.bootstrap3?t.removeClass(n+"bar-"+s):t.removeClass("bg-"+s)}),e.ui.bootstrap2||e.ui.bootstrap3?t.addClass(n+"bar-"+e.ui.colorClasses[s]):t.addClass("bg-"+e.ui.colorClasses[s]),t.css("width",o+"%")},u.updateVerdict=function(r,s,e,o){var i=u.getUIElements(r,s).$verdict;i.removeClass(r.ui.colorClasses.join(" ")),-1<e&&i.addClass(r.ui.colorClasses[e]),r.ui.showVerdictsInsideProgressBar&&i.css("white-space","nowrap"),i.html(o)},u.updateErrors=function(r,s,e){var o=u.getUIElements(r,s).$errors,i="";e||a.each(r.instances.errors,function(r,s){i+="<li>"+s+"</li>"}),o.html(i)},u.updateScore=function(r,s,e,o){var i=u.getUIElements(r,s).$score,t="";o||(t=e.toFixed(2)),i.html(t)},u.updatePopover=function(r,s,e,o){var i=s.data("bs.popover"),t="",n=!0;r.ui.showVerdicts&&!r.ui.showVerdictsInsideProgressBar&&0<e.length&&(t="<h5><span class='password-verdict'>"+e+"</span></h5>",n=!1),r.ui.showErrors&&(0<r.instances.errors.length&&(n=!1),t+=r.ui.popoverError(r)),n||o?s.popover("hide"):(r.ui.bootstrap2&&(i=s.data("popover")),i.$arrow&&0<i.$arrow.parents("body").length?s.find("+ .popover .popover-content").html(t):(r.ui.bootstrap2||r.ui.bootstrap3?i.options.content=t:i.config.content=t,s.popover("show")))},u.updateFieldStatus=function(e,r,s,o){var i=r;e.ui.bootstrap2?i=r.parents(".control-group").first():e.ui.bootstrap3&&(i=r.parents(".form-group").first()),a.each(t,function(r,s){e.ui.bootstrap3?s="has-"+s:e.ui.bootstrap2||("error"===s&&(s="danger"),s="border-"+s),i.removeClass(s)}),o||(s=t[Math.floor(s/2)],e.ui.bootstrap3?s="has-"+s:e.ui.bootstrap2||("error"===s&&(s="danger"),s="border-"+s),i.addClass(s))},u.percentage=function(r,s,e){var o=Math.floor(100*s/e),i=r.ui.progressBarMinPercentage;return o=100<(o=o<=i?i:o)?100:o},u.getVerdictAndCssClass=function(r,s){var e,o;return void 0===s?["",0]:(e=s<=r.ui.scores[0]?0:s<r.ui.scores[1]?1:s<r.ui.scores[2]?2:s<r.ui.scores[3]?3:s<r.ui.scores[4]?4:5,o=i[e],[r.i18n.t(o),e])},u.updateUI=function(r,s,e){var o,i,t=u.getVerdictAndCssClass(r,e),n=0===e?"":t[0];t=t[1],i=r.ui.useVerdictCssClass?t:-1,r.ui.showProgressBar&&(o=void 0===e?r.ui.progressBarEmptyPercentage:u.percentage(r,e,r.ui.scores[4]),u.updateProgressBar(r,s,t,o),r.ui.showVerdictsInsideProgressBar&&u.updateVerdict(r,s,i,n)),r.ui.showStatus&&u.updateFieldStatus(r,s,t,void 0===e),r.ui.showPopover?u.updatePopover(r,s,n,void 0===e):(r.ui.showVerdicts&&!r.ui.showVerdictsInsideProgressBar&&u.updateVerdict(r,s,i,n),r.ui.showErrors&&u.updateErrors(r,s,void 0===e)),r.ui.showScore&&u.updateScore(r,s,e,void 0===e)}}(jQuery,ui);